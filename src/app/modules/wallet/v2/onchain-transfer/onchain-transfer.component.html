<div class="m-walletModal__title">
  On-Chain Transfer
</div>
<div class="m-walletModal__desc">
  <!-- TODOOJM convert balance into number in .ts and use template format like this: {available, plural, =1
    {{{available | number}} token} other {{{available | number}} tokens}}' (full example commented below)-->
  <p>
    You can request to withdraw up to
    <span class="m-walletOnchainTransfer__offchainBalance"
      >{{ offchainBalance | token: 18 | number: '1.0-3' }} tokens</span
    >
    from your rewards to your on-chain wallet below.
  </p>
  <p class="m-walletOnchainTransfer__gasNotice">
    Note: a small amount of ETH will be charged to cover the transaction fee.
    Withdrawals go through an approval process and may take up to 72 hours to
    complete.
  </p>
</div>
<!-- TODOOJM does keyup duplicate the transfer() function trigger?-->
<!-- <form [formGroup]="form" (ngSubmit)="transfer()" (keyup.enter)="transfer()"> -->
<form [formGroup]="form" (keyup.enter)="transfer()">
  <div class="m-walletForm__wrapper">
    <div class="m-walletForm__fieldsContainer">
      <div class="m-walletForm__field--text stretchedField">
        <div class="m-walletForm__row--label">
          <label for="amount" i18n>Amount</label>
          <m-tooltip icon="help">
            <ng-container i18n>Placeholder</ng-container>
          </m-tooltip>
        </div>
        <div class="m-walletForm__row--input" [ngClass]="{ invalid: invalid }">
          <input
            type="number"
            id="amount"
            name="amount"
            formControlName="amount"
            class="form-control"
            autofocus
          />
        </div>
        <div class="m-walletForm__row--validation">
          <p *ngIf="invalid">
            ðŸš§ This doesn't do anything yet ðŸš§
          </p>
        </div>
      </div>
    </div>
    <m-shadowboxSubmitButton
      [disabled]="inProgress || invalid"
      [saving]="inProgress"
      (click)="transfer()"
    >
      Transfer
    </m-shadowboxSubmitButton>
  </div>
</form>

<!-- TODOOJM -->
<!-- <div
  class="m-border mdl-color--white m-token-withdraw"
  *ngIf="session.getLoggedInUser().rewards"
>
  <p i18n>
    You can request to withdraw up to {available, plural, =1
    {{{available | number}} token} other {{{available | number}} tokens}} from
    your rewards to your <b>OnChain</b> wallet below.
  </p>

  <p *ngIf="withholding" i18n>
    {withholding, plural, =1
    {{{withholding | number}} token} other {{{withholding | number}} tokens}}
    are unavailable due to credit card payment. They will be released after 30
    days the payment occurred.
  </p>

  <p class="m-token-withdraw__note" i18n>
    Note: a small amount of ETH will be charged to cover the transaction fee.
    Withdrawals <b>go through an approval process</b>
    and may take up to 72 hours to complete.
  </p>

  <div class="m-token-withdraw--form">
    <input
      type="text"
      class="m-token-withdraw--input"
      [disabled]="inProgress"
      [ngModel]="amount | number"
      (ngModelChange)="setAmount($event)"
    />

    <button
      class="m-token-withdraw--submit-button"
      [disabled]="!canWithdraw()"
      (click)="withdraw()"
      i18n="@@WALLET__TOKENS__WITHDRAW__WITHDRAW_ACTION"
    >
      Withdraw
    </button>

    <div
      *ngIf="inProgress"
      class="mdl-spinner mdl-js-spinner is-active"
      [mdl]
    ></div>
  </div>

  <p class="m-token-withdraw--error" *ngIf="!!error">
    {{ error }}
  </p>
</div>

<m-wallet-token--withdraw-ledger
  [preview]="true"
></m-wallet-token--withdraw-ledger> -->
