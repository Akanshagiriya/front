<div class="m-walletModal__title">
  On-Chain Transfer
</div>
<div class="m-walletModal__desc">
  <p>
    You can request to transfer up to
    <span class="m-walletOnchainTransfer__offchainBalance"
      >{balance, plural, =1 {{{balance | number}} token} other
      {{{balance | number}} tokens}}</span
    >
    from your rewards to your on-chain wallet below. You may only transfer once
    per day.
  </p>
  <p class="m-walletOnchainTransfer__gasNotice">
    Note: a small amount of ETH will be charged to cover the transaction fee.
    Transfers go through an approval process and may take up to 72 hours to
    complete.
  </p>
</div>
<!-- TODOOJM does keyup duplicate the transfer() function trigger?-->
<!-- <form [formGroup]="form" (ngSubmit)="transfer()" (keyup.enter)="transfer()"> -->
<form *ngIf="form" [formGroup]="form" (keyup.enter)="transfer()">
  <div class="m-walletForm__wrapper">
    <div class="m-walletForm__fieldsContainer">
      <div class="m-walletForm__field--text stretchedField">
        <div class="m-walletForm__row--label">
          <label for="amount" i18n>Amount</label>
          <m-tooltip icon="help">
            <ng-container i18n>Placeholder</ng-container>
          </m-tooltip>
        </div>
        <div
          class="m-walletForm__row--input"
          [ngClass]="{ invalid: error || amount.invalid }"
        >
          <input
            type="number"
            id="amount"
            name="amount"
            formControlName="amount"
            class="form-control"
            required
          />
        </div>
        <div class="m-walletForm__row--validation">
          <p *ngIf="error">{{ error }}</p>
          <ng-container
            *ngIf="amount.invalid && (amount.dirty || amount.touched)"
          >
            <p *ngIf="amount.errors.alreadyTransferredToday"></p>

            <ng-container *ngIf="!amount.errors.alreadyTransferredToday">
              <!-- <p *ngIf="amount.errors.required">Please select how many tokens you want to transfer.</p> -->
              <p *ngIf="amount.errors.min">
                Transfer amount must be greater than zero.
              </p>
              <p *ngIf="amount.errors.max">
                You don't have enough tokens to make this transfer.
              </p>
            </ng-container>
          </ng-container>
          <p></p>
        </div>
      </div>
    </div>
    <m-shadowboxSubmitButton
      [disabled]="!canTransfer()"
      [saving]="inProgress"
      (click)="transfer()"
    >
      Transfer
    </m-shadowboxSubmitButton>
  </div>
</form>
