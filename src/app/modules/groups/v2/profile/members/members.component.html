<div class="m-group__members">
  <div class="m-groupMembers__top">
    <div
      class="m-groupMembers__searchBox"
      [class.m-groupMembersList__searchBox--focused]="inputFocused"
      (click)="input.focus()"
      *ngIf="canSearch"
    >
      <i class="material-icons">search</i>
      <input
        type="text"
        placeholder="Filter..."
        [(ngModel)]="query"
        (keyup)="search(query)"
        i18n-placeholder="@@COMMON__GROUP_MEMBERS__FILTER_ELLIPSIS"
        (focusin)="inputFocused = true"
        (focusout)="inputFocused = false"
        #input
      />
    </div>
    <div
      class="m-groupMembers__invite"
      i18n="@@COMMON__GROUP_MEMBERS__INVITE_MEMBER"
      (click)="invite()"
    >
      Invite Member
    </div>
  </div>

  <div class="m-groupMembers__list">
    <table>
      <tbody>
        <tr *ngFor="let member of members">
          <td>
            <div class="m-groupEntity__user">
              <minds-avatar [object]="member"></minds-avatar>
              {{ member.username }}
            </div>
          </td>
          <td>
            <ng-container *ngIf="member['is:owner']; else moderatorBlock">
              Owner
            </ng-container>
            <ng-template #moderatorBlock>
              <ng-container *ngIf="member['is:moderator']">
                Moderator
              </ng-container>
            </ng-template>
          </td>
          <td>
            <minds-button-subscribe
              [user]="member"
              *ngIf="
                session.isLoggedIn() &&
                session.getLoggedInUser().guid != member.guid &&
                !member.blocked &&
                !member.subscribed
              "
            ></minds-button-subscribe>
          </td>
          <td>
            <m-groupMember__button
              [group]="service.group$ | async"
              [user]="member"
            >
            </m-groupMember__button>
          </td>
        </tr>
      </tbody>
    </table>

    <infinite-scroll
      distance="25%"
      (load)="load()"
      [moreData]="moreData"
      [inProgress]="inProgress"
    ></infinite-scroll>
  </div>
</div>
