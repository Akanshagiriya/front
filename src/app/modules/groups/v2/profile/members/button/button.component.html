<div
  class="m-groupMemberButton__button"
  *ngIf="
    group['is:owner'] ||
    (group['is:moderator'] && !(user['is:owner'] || user['is:moderator']))
  "
  (click)="toggleMenu($event)"
>
  <i class="material-icons">more_vert</i>
</div>

<ul class="m-dropdown__list" [hidden]="!showMenu">
  <ng-container *ngIf="!request; else requestBlock">
    <li
      class="m-dropdownList__item"
      *ngIf="
        (group['is:owner'] || group['is:moderator']) &&
        !(user['is:owner'] || user['is:moderator']) &&
        user['is:member']
      "
      (click)="removePrompt()"
    >
      <span
        class="minds-menu-info-item"
        i18n="@@GROUPS__PROFILE__CARD_USER_ACTIONS__REMOVE_FROM_GROUP"
      >
        Remove from Group
      </span>
    </li>
    <li
      class="m-dropdownList__item"
      *ngIf="
        (group['is:owner'] || group['is:moderator']) &&
        !user['is:member'] &&
        !wasReInvited
      "
      (click)="reInvite()"
    >
      <span
        class="minds-menu-info-item"
        i18n="@@GROUPS__PROFILE__CARD_USER_ACTIONS__REINVITE"
      >
        Re-invite to Group
      </span>
    </li>
    <li
      class="m-dropdownList__item"
      *ngIf="(group['is:owner'] || group['is:moderator']) && wasReInvited"
    >
      <span
        class="minds-menu-info-item"
        i18n="@@GROUPS__PROFILE__CARD_USER_ACTIONS__INVITED"
      >
        Invited
      </span>
    </li>
    <li
      class="m-dropdownList__item"
      *ngIf="
        group['is:owner'] &&
        !(user['is:owner'] || user['is:moderator']) &&
        user['is:member']
      "
      (click)="grantOwnership()"
    >
      <span
        class="minds-menu-info-item"
        i18n="@@GROUPS__PROFILE__CARD_USER_ACTIONS__MAKE_ADMIN"
      >
        Make Admin
      </span>
    </li>
    <li
      class="m-dropdownList__item"
      *ngIf="group['is:owner'] && user['is:owner'] && user['is:member']"
      (click)="revokeOwnership()"
    >
      <span
        class="minds-menu-info-item"
        i18n="@@GROUPS__PROFILE__CARD_USER_ACTIONS__REMOVE_AS_ADMIN"
      >
        Remove as Admin
      </span>
    </li>
    <li
      class="m-dropdownList__item"
      *ngIf="
        group['is:owner'] &&
        !(user['is:owner'] || user['is:moderator']) &&
        user['is:member']
      "
      (click)="grantModerator()"
    >
      <span
        class="minds-menu-info-item"
        i18n="@@GROUPS__PROFILE__CARD_USER_ACTIONS__MAKE_MODERATOR"
      >
        Make Moderator
      </span>
    </li>
    <li
      class="m-dropdownList__item"
      *ngIf="group['is:owner'] && user['is:moderator'] && user['is:member']"
      (click)="revokeModerator()"
    >
      <span
        class="minds-menu-info-item"
        i18n="@@GROUPS__PROFILE__CARD_USER_ACTIONS__REMOVE_AS_MODERATOR"
      >
        Remove as Moderator
      </span>
    </li>
  </ng-container>
  <ng-template #requestBlock>
    <li
      class="m-dropdownList__item"
      *ngIf="group['is:owner']"
      (click)="acceptRequest()"
    >
      <span
        class="minds-menu-info-item"
        i18n="@@GROUP__PROFILE__CARD_USER_ACTIONS__ACCEPT_REQUEST"
      >
        Accept Request
      </span>
    </li>

    <li
      class="m-dropdownList__item"
      *ngIf="group['is:owner']"
      (click)="rejectRequest()"
    >
      <span
        class="minds-menu-info-item"
        i18n="@@GROUP__PROFILE__CARD_USER_ACTIONS__REJECT_REQUEST"
      >
        Reject Request
      </span>
    </li>
  </ng-template>
</ul>
<div
  class="minds-bg-overlay"
  (click)="toggleMenu($event)"
  [hidden]="!showMenu"
></div>

<m-modal [open]="kickPrompt">
  <div class="mdl-card__supporting-text">
    <p i18n="@@GROUPS__REMOVE_X_FROM_Y_CONFIRM">
      Are you sure you want to remove {{ user.username }} from {{ group.name }}?
    </p>
    <p>
      <input type="checkbox" #ban />
      <ng-container i18n="@@M__COMMON__BAN_PERMANENTLY"
        >Ban permanently
      </ng-container>
    </p>
  </div>
  <div class="minds-modal-dialog-actions">
    <button
      (click)="kick(ban.checked)"
      class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored"
      data-cy="data-minds-modal-confirm"
    >
      <ng-container i18n="@@M__ACTION__CONFIRM">Confirm</ng-container>
    </button>
    <button
      (click)="cancelRemove()"
      class="mdl-button mdl-js-button mdl-button--colored"
    >
      <ng-container i18n="@@M__ACTION__CANCEL">Cancel</ng-container>
    </button>
  </div>
</m-modal>
