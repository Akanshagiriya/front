<div class="m-hashtagsSidebarSelector__header">
  <h3 i18n>Hashtags</h3>

  <span>
    <m-switch [(mModel)]="preferred" (change)="preferredChange()" [disabled]="disabled" labelPosition="left" i18n>Preferred</m-switch>
  </span>
</div>

<div class="m-hashtagsSidebarSelector__list">
  <ul>
    <li *ngFor="let hashtag of visibleHashtags">
      <a
        class="m-hashtagsSidebarSelectorList__label"
        [class.m-hashtagsSidebarSelectorList__label--visible]="!disabled && currentHashtag === hashtag.value"
        [title]="'#' + hashtag.value"
        (click)="hashtagVisibilityChange(hashtag)"
      >#{{hashtag.value}}</a>

      <a
        class="m-hashtagsSidebarSelectorList__visibility"
        [class.m-hashtagsSidebarSelectorList__visiblilty--visible]="!disabled && currentHashtag === hashtag.value"
        (click)="hashtagVisibilityChange(hashtag)"
      ><i class="material-icons">visibility</i></a>

      <span class="m-hashtagsSidebarSelectorList__switch">
        <m-switch
          [disabled]="disabled || !preferred"
          [mModel]="hashtag.selected"
          (mModelChange)="toggleHashtag(hashtag)"
          labelPosition="left"
        ></m-switch>
      </span>
    </li>

    <li *ngIf="!disabled && !loading && (!hasBelowTheFoldHashtags || showAll)">
      <input type="text"
        class="m-hashtagsSidebarSelectorList__addInput"
        (keydown.enter)="addHashtag($event.target); $event.preventDefault()"
        (keydown.tab)="addHashtag($event.target); $event.preventDefault()"
        placeholder="#hashtag"
        i18n-placeholder
        #newHashtagInput
      />

      <a
        class="m-hashtagsSidebarSelectorList__addButton"
        (click)="addHashtag(newHashtagInput)"
      ><i class="material-icons">check</i></a>

      <a
        class="m-hashtagsSidebarSelectorList__addButton"
        (click)="resetAddHashtag(newHashtagInput)"
      ><i class="material-icons">close</i></a>
    </li>
  </ul>

  <a (click)="toggleShowAll()" *ngIf="hasBelowTheFoldHashtags" class="m-hashtagsSidebarSelector__showMoreLink">
    <ng-container *ngIf="showAll; else showLess" i18n>Show less</ng-container>
    <ng-template #showLess i18n>Show more</ng-template>
  </a>
</div>
