<div
  *ngIf="preview$ | async as preview"
  class="m-composer__mediaPreview"
  [class.m-composer__mediaPreview--portrait]="portrait"
  [hidden]="preview.source === 'none'"
>
  <ng-container *ngIf="preview.sourceType === 'image'">
    <img
      class="m-composerMediaPreview__image"
      alt="Uploaded image"
      i18n-alt
      [src]="trustedUrl(preview.payload)"
      (load)="fitForImage(image)"
      #image
    />
  </ng-container>
  <ng-container *ngIf="preview.sourceType === 'video'">
    <video
      muted
      title="Uploaded video"
      class="m-composerMediaPreview__video"
      (loadedmetadata)="fitForVideo(video)"
      #video
    >
      <source [src]="trustedUrl(preview.payload + '#t=1')" />
    </video>
  </ng-container>

  <div (click)="remove()" class="m-mediaPreview__close">
    <m-icon iconId="close"></m-icon>
  </div>
</div>
