<div
  *ngIf="channel"
  class="m-pro--channel"
>
  <div class="m-proChannel__topbar">
    <img
      class="m-proChannelTopbar__logo"
      [src]="channel.pro_settings.logo_image"
      [routerLink]="['/pro', channel.username]"
    >

    <div class="m-proChannelTopbar__SearchBox">
      <div class="mdl-textfield mdl-js-textfield">
        <i class="material-icons search">search</i>
        <input
          [(ngModel)]="searchedText"
          id="search"
          autocomplete="off"
          class="mdl-textfield__input ng-pristine ng-valid ng-touched"
          type="text"
          (keyup.enter)="search()"
        >
        <ng-container *ngIf="searchedText">
          <i class="material-icons clear" (click)="clearSearch()">close</i>
        </ng-container>
        <label class="mdl-textfield__label" for="search"></label>
      </div>
    </div>

    <ng-container *ngIf="!collapseNavItems">
      <a
        class="m-proChannelTopbar__navItem"
        [routerLink]="['/pro', channel.username, 'feed']"
        routerLinkActive="active"
        i18n
      >Feed</a>
      <a
        class="m-proChannelTopbar__navItem"
        [routerLink]="linkTo('videos', searchedText)"
        routerLinkActive="active"
        i18n
      >Videos</a>
      <a
        class="m-proChannelTopbar__navItem"
        [routerLink]="linkTo('images', searchedText)"
        routerLinkActive="active"
        i18n
      >Images</a>
      <a
        class="m-proChannelTopbar__navItem"
        [routerLink]="linkTo('articles', searchedText)"
        routerLinkActive="active"
        i18n
      >Articles</a>
      <a
        class="m-proChannelTopbar__navItem"
        [routerLink]="linkTo('communities', query)"
        routerLinkActive="active"
        i18n
      >Communities</a>
      <a
        class="m-proChannelTopbar__navItem"
        [routerLink]="['/pro', channel.username, 'donate']"
        routerLinkActive="active"
        i18n
      >Donate</a>

      <button class="m-proChannelTopbar_subscribe" (click)="subscribe($event)" [disabled]="channel.subscribed" [hidden]="currentUser && (channel.guid === currentUser.guid)"> 
        {{ !channel.subscribed ? 'Subscribe' : 'Subscribed' }}
        <span> 
          {{ channel.subscribers_count | abbr:0 }} 
        </span> 
      </button>
    </ng-container>

    <div class="m-proChannelTopbar_menu m-dropdown">
      <a class="m-proChannelTopbarMenu__Anchor" (click)="toggleMenu()"><i class="material-icons">menu</i></a>
    
      <ul class="m-dropdown__list m-proChannelTopbarMenu__dropdown mdl-shadow--3dp" [hidden]="!isMenuOpen">
        <ng-container *ngIf="collapseNavItems">
          <li
            class="m-dropdownList__item m-proChannelTopbarMenuDropdown__item"
            (click)="closeMenu()"
          >
            <a [routerLink]="linkTo('videos', query)" routerLinkActive="active" i18n>Videos</a>
          </li>
    
          <li
            class="m-dropdownList__item m-proChannelTopbarMenuDropdown__item"
            (click)="closeMenu()"
          >
            <a [routerLink]="linkTo('images', query)" routerLinkActive="active" i18n>Images</a>
          </li>
    
          <li
            class="m-dropdownList__item m-proChannelTopbarMenuDropdown__item"
            (click)="closeMenu()"
          >
            <a [routerLink]="linkTo('articles', query)" routerLinkActive="active" i18n>Articles</a>
          </li>
    
          <li
            class="m-dropdownList__item m-proChannelTopbarMenuDropdown__item"
            (click)="closeMenu()"
          >
            <a [routerLink]="linkTo('groups', query)" routerLinkActive="active" i18n>Groups</a>
          </li>
    
          <li
            class="m-dropdownList__item m-proChannelTopbarMenuDropdown__item"
            (click)="closeMenu()"
          >
            <a [routerLink]="['/pro', channel.username, 'donate']" routerLinkActive="active">Donate</a>
          </li>
        </ng-container>
      </ul>
    </div>
    
    <div class="minds-bg-overlay" (click)="closeMenu()" [hidden]="!isMenuOpen"></div>
  </div>

  <div class="m-proChannel__categories" *ngIf="showCategories">
    <div
      class="m-proChannel__category"
      [class.m-proChannel__selectedCategory]="!!tag.selected"
      (click)="selectTag(tag)"
      *ngFor="let tag of channel.pro_settings.tag_list"
    >
      {{tag.label}}
    </div>
  </div>

  <div class="m-proChannel__body">
    <router-outlet></router-outlet>
  </div>

  <div class="m-proChannel__footer">
    <m-pro--channel-footer></m-pro--channel-footer>
  </div>
</div>
