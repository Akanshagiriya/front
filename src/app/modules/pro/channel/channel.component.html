<div *ngIf="channel" class="m-pro--channel">
  <div class="m-proChannel__topbar">
    <img
      class="m-proChannelTopbar__logo"
      [src]="channel.pro_settings.logo_image"
      [routerLink]="homeRouterLink"
    />

    <div class="m-proChannelTopbar__SearchBox">
      <div class="mdl-textfield mdl-js-textfield">
        <i class="material-icons search">search</i>
        <input
          [(ngModel)]="query"
          id="search"
          autocomplete="off"
          class="mdl-textfield__input ng-pristine ng-valid ng-touched"
          type="text"
          (keyup.enter)="search()"
        />
        <ng-container *ngIf="query">
          <i class="material-icons clear" (click)="clearSearch()">close</i>
        </ng-container>
        <label class="mdl-textfield__label" for="search"></label>
      </div>
    </div>

    <ng-container *ngIf="!collapseNavItems">
      <a
        class="m-proChannelTopbar__navItem"
        [routerLink]="feedRouterLink"
        routerLinkActive="active"
        i18n
      >
        Feed
      </a>

      <a
        class="m-proChannelTopbar__navItem"
        [routerLink]="videosRouterLink"
        routerLinkActive="active"
        i18n
      >
        Videos
      </a>

      <a
        class="m-proChannelTopbar__navItem"
        [routerLink]="imagesRouterLink"
        routerLinkActive="active"
        i18n
      >
        Images
      </a>

      <a
        class="m-proChannelTopbar__navItem"
        [routerLink]="articlesRouterLink"
        routerLinkActive="active"
        i18n
      >
        Articles
      </a>

      <a
        class="m-proChannelTopbar__navItem"
        [routerLink]="groupsRouterLink"
        routerLinkActive="active"
        i18n
      >
        Groups
      </a>

      <ng-container
        *ngIf="currentUser?.guid != channel.guid; else ownerNavLinks"
      >
        <a class="m-proChannelTopbar__navItem" (click)="wire()" i18n>Wire</a>

        <button
          class="m-proChannelTopbar__subscribe"
          [class.m-proChannelTopbar__subscribe--subscribed]="channel.subscribed"
          (click)="toggleSubscription($event)"
        >
          <span class="m-proChannelTopbar__subscribe--label">
            <ng-container
              *ngIf="!channel.subscribed; else subscribedActionButton"
              i18n
            >
              Subscribe
            </ng-container>
            <ng-template #subscribedActionButton>
              <ng-container i18n>Subscribed</ng-container>
            </ng-template>
          </span>

          <span class="m-proChannelTopbar__subscribe--counter">
            {{ subscribersCount | abbr: 0 }}
          </span>
        </button>
      </ng-container>
      <ng-template #ownerNavLinks>
        <a
          *ngIf="isProDomain"
          class="m-proChannelTopbar__navItem"
          [href]="proSettingsHref"
          target="root_minds"
          i18n
        >
          Settings
        </a>

        <a
          *ngIf="!isProDomain"
          class="m-proChannelTopbar__navItem"
          [routerLink]="proSettingsLink"
          i18n
        >
          Settings
        </a>
      </ng-template>
    </ng-container>

    <m-pro__hamburger-menu></m-pro__hamburger-menu>
  </div>

  <div class="m-proChannel__body">
    <router-outlet></router-outlet>
  </div>

  <div class="m-proChannel__footer">
    <m-pro--channel-footer></m-pro--channel-footer>
  </div>
</div>

<m-overlay-modal #overlayModal></m-overlay-modal>
