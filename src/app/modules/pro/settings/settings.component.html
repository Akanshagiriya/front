<div class="m-pro--settings">
  <div class="m-toolbar" *ngIf="settings">
    <div class="m-topbar--row">
      <div class="m-topbar--navigation m-topbar--navigation--text-only">
        <a
          class="m-topbar--navigation--item"
          [class.m-topbar--navigation--item-active]="currentTab === 'general'"
          (click)="currentTab = 'general'"
        >
          <span i18n>General</span>
          <m-tooltip icon="help" i18n>
            TBD
          </m-tooltip>
        </a>

        <a
          class="m-topbar--navigation--item"
          [class.m-topbar--navigation--item-active]="currentTab === 'theme'"
          (click)="currentTab = 'theme'"
        >
          <span i18n>Theme</span>
          <m-tooltip icon="help" i18n>
            TBD
          </m-tooltip>
        </a>

        <a
          class="m-topbar--navigation--item"
          [class.m-topbar--navigation--item-active]="currentTab === 'hashtags'"
          (click)="currentTab = 'hashtags'"
        >
          <span i18n>Hashtags</span>
          <m-tooltip icon="help" i18n>
            TBD
          </m-tooltip>
        </a>

        <a
          class="m-topbar--navigation--item"
          [class.m-topbar--navigation--item-active]="currentTab === 'footer'"
          (click)="currentTab = 'footer'"
        >
          <span i18n>Footer</span>
          <m-tooltip icon="help" i18n>
            TBD
          </m-tooltip>
        </a>

        <a
          class="m-topbar--navigation--item"
          [class.m-topbar--navigation--item-active]="currentTab === 'cancel'"
          (click)="currentTab = 'cancel'"
        >
          <span i18n>Cancel</span>
          <m-tooltip icon="help" i18n>
            TBD
          </m-tooltip>
        </a>
      </div>
    </div>
  </div>

  <div class="m-page">
    <div class="m-page--main m-pro--settings--page m-border">
      <div *ngIf="inProgress && !settings">
        <div class="mdl-spinner mdl-js-spinner is-active" [mdl]></div>
      </div>

      <ng-container *ngIf="settings">
        <form (ngSubmit)="save()">
          <ng-container [ngSwitch]="currentTab">

            <!-- General -->

            <ng-template ngSwitchCase="general">
              <p class="m-pro--settings--note" i18n>
                Customize your domain, title and headline. This will be used as your SEO tags as well.
              </p>

              <div class="m-pro--settings--field">
                <label for="domain" i18n>Domain</label>
                <input type="text" id="domain" name="domain" [(ngModel)]="settings.domain">
              </div>

              <div class="m-pro--settings--field">
                <label for="title" i18n>Title</label>
                <input type="text" id="title" name="title" [(ngModel)]="settings.title">
              </div>

              <div class="m-pro--settings--field">
                <label for="headline" i18n>Headline</label>
                <input type="text" id="headline" name="headline" [(ngModel)]="settings.headline">
              </div>
            </ng-template>

            <!-- Theme -->

            <ng-template ngSwitchCase="theme">
              <p class="m-pro--settings--note" i18n>
                Set up your color scheme below.
              </p>

              <div class="m-pro--settings--field">
                <label for="text_color" i18n>Text Color</label>
                <input type="color" id="text_color" name="text_color" [(ngModel)]="settings.text_color">
              </div>

              <div class="m-pro--settings--field">
                <label for="primary_color" i18n>Primary Color</label>
                <input type="color" id="primary_color" name="primary_color" [(ngModel)]="settings.primary_color">
              </div>

              <div class="m-pro--settings--field">
                <label for="plain_background_color" i18n>Plain Background Color</label>
                <input type="color" id="plain_background_color" name="plain_background_color" [(ngModel)]="settings.plain_background_color">
              </div>

              <div class="m-pro--settings--field">
                <label i18n>Color Schema</label>

                <input type="radio" id="scheme_light" name="scheme" value="light" [(ngModel)]="settings.scheme">
                <label for="scheme_light" class="m-pro--settings--inline-label">Light</label>

                <input type="radio" id="scheme_dark" name="scheme" value="dark" [(ngModel)]="settings.scheme">
                <label for="scheme_dark" class="m-pro--settings--inline-label">Dark</label>
              </div>

              <div class="m-pro--settings--field">
                <label for="logo_guid" i18n>Logo Asset GUID</label>
                <input type="text" id="logo_guid" name="logo_guid" [(ngModel)]="settings.logo_guid">
              </div>
            </ng-template>

            <!-- Tags -->

            <ng-template ngSwitchCase="hashtags">
              <p class="m-pro--settings--note" i18n>
                Set up your category filter hashtags here.
              </p>


              <div class="m-pro--settings--field" *ngFor="let tag of settings.tag_list; let i = index">
                <label for="headline" i18n>Hashtag #{{ i + 1 }}</label>

                <div class="m-pro--settings--flex-inputs">
                  <input
                    type="text"
                    placeholder="Label"
                    [id]="'tag-label-' + i"
                    [name]="'tag[' + i + '][label]'"
                    [(ngModel)]="tag.label"
                    i18n-placeholder
                  >

                  <input
                    type="text"
                    placeholder="#hashtag"
                    [id]="'tag-tag-' + i"
                    [name]="'tag[' + i + '][tag]'"
                    [(ngModel)]="tag.tag"
                    i18n-placeholder
                  >
                </div>
              </div>

              <!--<m-draggable-list
                [data]="settings.tag_list">
                <ng-template let-tag="item" let-i="i">

                  <div class="m-pro&#45;&#45;settings&#45;&#45;field">
                    <label for="headline" i18n>Hashtag #{{ i + 1 }}</label>

                    <div class="m-pro&#45;&#45;settings&#45;&#45;flex-inputs">
                      <input
                        type="text"
                        placeholder="Label"
                        [id]="'tag-label-' + i"
                        [name]="'tag[' + i + '][label]'"
                        [(ngModel)]="tag.label"
                        i18n-placeholder
                      >

                      <input
                        type="text"
                        placeholder="#hashtag"
                        [id]="'tag-tag-' + i"
                        [name]="'tag[' + i + '][tag]'"
                        [(ngModel)]="tag.tag"
                        i18n-placeholder
                      >
                    </div>
                  </div>
                </ng-template>
              </m-draggable-list>-->

              <div class="m-pro--settings--field">
                <button
                  class="m-btn m-btn--slim"
                  type="button"
                  [disabled]="inProgress"
                  (click)="addBlankTag()"
                  i18n
                >+ Add Tag
                </button>
              </div>
            </ng-template>

            <!-- Footer -->

            <ng-template ngSwitchCase="footer">
              <p class="m-pro--settings--note" i18n>
                Set up your footer links below.
              </p>

              <div class="m-pro--settings--field">
                <label for="footer_text" i18n>Text</label>
                <input type="text" id="footer_text" name="footer_text" [(ngModel)]="settings.footer_text">
              </div>

              <div class="m-pro--settings--field" *ngFor="let link of settings.footer_links; let i = index">
                <label for="headline" i18n>Link #{{ i + 1 }}</label>

                <div class="m-pro--settings--flex-inputs">
                  <input
                    type="text"
                    placeholder="Title"
                    [id]="'footer-link-title-' + i"
                    [name]="'footer_link[' + i + '][title]'"
                    [(ngModel)]="link.title"
                    i18n-placeholder
                  >

                  <input
                    type="text"
                    placeholder="https://example.com/"
                    [id]="'footer-link-href-' + i"
                    [name]="'footer_link[' + i + '][href]'"
                    [(ngModel)]="link.href"
                    i18n-placeholder
                  >
                </div>
              </div>

              <div class="m-pro--settings--field">
                <button
                  class="m-btn m-btn--slim"
                  type="button"
                  [disabled]="inProgress"
                  (click)="addBlankFooterLink()"
                  i18n
                >+ Add Link</button>
              </div>
            </ng-template>

            <!-- Cancel -->

            <ng-template ngSwitchCase="cancel">
              <p class="m-pro--settings--note" i18n>
                Clicking the button below will take you to Minds Pro page, where you can
                cancel your subscription.
              </p>

              <div class="m-pro--settings--field">
                <a
                  class="m-btn m-link-btn m-btn--slim m-btn--destructive"
                  routerLink="/pro"
                >Cancel Pro</a>
              </div>
            </ng-template>
          </ng-container>

          <div class="m-pro--settings--field m-pro--settings--field-actions" *ngIf="currentTab !== 'cancel'">
            <button
              class="m-btn m-btn--slim m-btn--action"
              type="submit"
              [disabled]="inProgress"
              i18n
            >Save</button>

            <div class="m-pro--settings--field-spinner" *ngIf="inProgress">
              <div class="mdl-spinner mdl-js-spinner is-active" [mdl]></div>
            </div>

            <a
              class="m-btn m-link-btn m-btn--slim m-pro--settings--preview-btn"
              [routerLink]="previewRoute"
              i18n
            >Go to your channel</a>
          </div>
        </form>
      </ng-container>
    </div>
  </div>
</div>
