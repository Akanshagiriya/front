<div class="m-analytics__dashboard">
  <m-sidebarMenu></m-sidebarMenu>
  <!-- TODOO JM: uncomment me -->
  <!-- <section class="m-analytics__main" *ngIf="ready$ | async"> -->
  <section class="m-analytics__main">
    <div class="m-analytics__mainHeader">
      <div class="m-analytics__dashboardTitle">
        <h3 class="m-analytics__selectedCatLabel">
          {{ category$ | async | titlecase }}
        </h3>
      </div>
      <div class="m-analytics__globalFilters" *ngIf="layout === 'chart'">
        <!-- <div *ngIf="session.isAdmin()" class="m-analytics__channelSearch"> -->
        <!-- <div class="m-analytics__channelSearch">
          <m-analytics__search></m-analytics__search>
        </div> -->
        <!-- <div class="m-analytics__channelFilter" *ngIf="session.isAdmin()">
          <m-analytics__filter [filter]="channelFilter"></m-analytics__filter>
        </div> -->
        <div class="m-analytics__timespanFilter">
          <m-analytics__filter
            [filter]="timespanFilter"
            [showLabel]="false"
          ></m-analytics__filter>
        </div>
      </div>
    </div>
    <p
      class="m-analytics__selectedCatDescription"
      *ngIf="description$ | async as description"
    >
      {{ description }}
      <ng-container *ngIf="(category$ | async) === 'earnings'">
        <a *ngIf="!session.getLoggedInUser().pro" routerLink="/pro"
          >Upgrade to PRO</a
        >
        <a
          *ngIf="
            session.getLoggedInUser().pro &&
            !(
              session.getLoggedInUser().merchant &&
              session.getLoggedInUser().merchant['id']
            )
          "
          routerLink="/wallet/usd"
          >Enable payouts</a
        >
      </ng-container>
    </p>
    <m-analytics__layout--chart
      *ngIf="layout === 'chart'"
      class="m-analytics__layout"
    ></m-analytics__layout--chart>
    <m-analytics__layout--summary
      *ngIf="layout === 'summary'"
      class="m-analytics__layout"
    ></m-analytics__layout--summary>
  </section>
</div>
