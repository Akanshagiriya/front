<div class="m-analytics__filterLabelWrapper" *ngIf="filter.id !== 'timespan'">
  <span>{{ filter.label }}</span>
  <m-tooltip icon="help">
    <div class="m-analytics__filterDesc">{{ filter?.description }}</div>
    <ul class="m-analytics__filterOptions__descContainer">
      <ng-container *ngFor="let option of filter.options">
        <li class="m-analytics__filterOption__desc">
          <span class="m-analytics__filterOption__descLabel">{{
            option.label
          }}</span
          ><span
            class="m-analytics__filterOption__desc"
            *ngIf="option.description"
            >: {{ option.description }}</span
          >
        </li>
      </ng-container>
    </ul>
  </m-tooltip>
</div>
<div
  class="m-analytics__filterWrapper"
  [ngClass]="{
    expanded: expanded,
    isMobile: isMobile,
    dropUp: dropUp
  }"
  (focus)="expanded = true"
  (blur)="expanded = false"
>
  <div class="m-analytics__filterHeader" (click)="expanded = !expanded">
    <div class="m-analytics__filterRow">
      <span
        class="m-analytics__filterOption m-analytics__filterOption--selected"
      >
        {{ selectedOption.label }}
      </span>
      <i class="material-icons" *ngIf="!expanded">keyboard_arrow_down</i>
      <i class="material-icons" *ngIf="expanded">keyboard_arrow_up</i>
    </div>
  </div>
  <div class="m-analytics__filterUnselectedOptionsContainer">
    <ng-container *ngFor="let option of filter.options">
      <div
        class="m-analytics__filterOption m-analytics__filterRow"
        (click)="updateFilter(option)"
        [ngClass]="{
          unavailable: option.available === false
        }"
      >
        <span>{{ option.label }}</span>
      </div>
    </ng-container>
  </div>
</div>
