<div class="metricsContainer" *ngIf="metrics$ | async as metrics">
  <div
    class="metric"
    *ngFor="let metric of metrics"
    (click)="updateMetric(metric)"
    [ngClass]="{ active: metric.visualisation }"
  >
    <div class="metricLabel">{{ metric.label }}</div>
    <!-- TODO the "number" pipe should be from backend so it can dynamically handle diff decimals/currency formats -->
    <div class="metricSummary">
      {{ metric.summary.current_value | number }}
    </div>

    <div
      class="metricDelta"
      [ngClass]="{
        goodChange: metric.hasChanged && metric.positiveTrend,
        badChange: metric.hasChanged && !metric.positiveTrend
      }"
    >
      <i class="material-icons" *ngIf="metric.delta > 0">arrow_upward</i>
      <i class="material-icons" *ngIf="metric.delta < 0">arrow_downward</i>
      <span>{{ metric.delta | percent: '1.0-1' }}</span>
    </div>
  </div>
</div>
