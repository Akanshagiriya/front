<section class="metricsSection" [ngClass]="{ isMobile: isMobile }">
  <!-- <div class="overflowFade--left"></div>
  <div class="overflowScrollButton--left">
    <i class="material-icons">chevron_left</i>
  </div> -->
  <div class="metricsWrapper">
    <div class="metricsContainer" *ngIf="metrics$ | async as metrics">
      <div
        class="metric"
        *ngFor="let metric of metrics"
        (click)="updateMetric(metric)"
        [ngClass]="{ active: metric.visualisation }"
      >
        <div class="metricLabel">{{ metric.label }}</div>
        <!-- TODO the "number" pipe should be from backend so it can dynamically handle diff decimals/currency formats -->
        <div class="metricSummary" *ngIf="metric.summary">
          <ng-container *ngIf="metric.unit === 'number'">
            {{ metric.summary.current_value | number }}
          </ng-container>
          <ng-container *ngIf="metric.unit === 'usd'">
            <span>$</span
            >{{ metric.summary.current_value / 100 | number: '1.2-2' }}
          </ng-container>
        </div>

        <div
          *ngIf="metric.summary"
          class="metricDelta"
          [ngClass]="{
            goodChange: metric.hasChanged && metric.positiveTrend,
            badChange: metric.hasChanged && !metric.positiveTrend
          }"
        >
          <i class="material-icons" *ngIf="metric.delta > 0">arrow_upward</i>
          <i class="material-icons" *ngIf="metric.delta < 0">arrow_downward</i>
          <span>{{ metric.delta | percent: '1.0-1' }}</span>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="overflowFade--right"></div>
  <div class="overflowScrollButton--right">
    <i class="material-icons">chevron_right</i>
  </div> -->
</section>
