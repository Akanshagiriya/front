<div class="m-sidebarMenu__topbar">
  <i class="material-icons" (click)="mobileMenuExpanded = true">menu</i>
  <div class="m-sidebarMenu__topbarHeader">
    {{ menu.header.label }}
  </div>
</div>
<div
  class="m-sidebarMenu__overlay"
  [ngClass]="{ mobileMenuExpanded: mobileMenuExpanded }"
  (click)="mobileMenuExpanded = false"
></div>
<div
  class="m-sidebarMenu__sidebar"
  [ngClass]="{ mobileMenuExpanded: mobileMenuExpanded }"
>
  <a class="m-sidebarMenu__userWrapper" [routerLink]="['/', user.username]">
    <img
      class="m-sidebarMenu__userAvatar"
      [src]="minds.cdn_url + 'icon/' + user.guid + '/medium/' + user.icontime"
    />
    <div class="m-sidebarMenu__userDetails">
      <div class="m-sidebarMenu__userDetails__name">{{ user.name }}</div>
      <div class="m-sidebarMenu__userDetails__username">
        @{{ user.username }}
      </div>
      <!-- TODO: get subscriberCount and remove username -->
      <!-- <div class="m-sidebarMenu__userDetails__subscribers">
          {{ user.subscribers_count | abbr }} subscribers
        </div> -->
    </div>
  </a>
  <!-- <ng-container *ngFor="let menu of menus"> -->
  <div
    class="m-sidebarMenu__menuContainer expanded"
    *ngIf="menu.header.permissionGranted"
  >
    <!-- [ngClass]="{ expanded: menu.header.expanded }"  -->

    <div class="m-sidebarMenu__header">
      <h3>{{ menu.header.label }}</h3>
      <!-- <i
        class="material-icons"
        *ngIf="menu.header.expanded && menu.links"
        (click)="menu.header.expanded = false"
        >keyboard_arrow_up</i
      > -->
      <!-- <i class="material-icons" *ngIf="!menu.header.expanded && menu.links"
        >keyboard_arrow_down</i
      > -->
      <!-- (click)="menu.header.expanded = true" -->
    </div>

    <nav class="m-sidebarMenu__linksContainer" *ngIf="menu.links">
      <div class="m-sidebarMenu__link" *ngFor="let link of menu.links">
        <!-- OJMTODO: fix target _blank -->
        <a
          *ngIf="link.permissionGranted"
          (click)="mobileMenuExpanded = false"
          [routerLink]="link.path ? '/' + link.path : '../' + link.id"
          routerLinkActive="selected"
          [routerLinkActiveOptions]="{ exact: true }"
          [target]="link.newWindow ? '_blank' : '_self'"
          [ngClass]="{ newWindow: link.newWindow }"
          ><i class="material-icons" *ngIf="link.newWindow">launch</i>
          <span>{{ link.label }}</span></a
        >
      </div>
    </nav>
  </div>
  <!-- </ng-container> -->
</div>
